{{extend 'layout.html'}}

{{block head}}
<script src="{{=URL('static', 'js/vue.js')}}"></script>
<script>
    var get_wheels_url = "{{=URL('api', 'get_wheels')}}";
    var add_wheel_url = "{{=URL('api', 'add_wheel', user_signature=True)}}";
    var del_wheel_url = "{{=URL('api', 'del_wheel', user_signature=True)}}";
</script>
{{end}}


<div class="main_content">

    <div id="vue-div" class="display:none">
        <!-- add wheel -->
         <div class="button_bar">
            <!-- Colored raised add post button -->
            <button v-if="!is_adding_wheel" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" v-on:click="add_wheel_button()" v-bind:class="{'disabled': !logged_in}">
            Add new wheel
            </button>
            <!-- Raised delete button -->
            <button v-if="is_adding_wheel" class="mdl-button mdl-js-button mdl-button--raised" v-on:click="cancel_add_button()">
            Cancel
            </button>

         </div>

        <div v-if="is_adding_wheel" id="add-new-wheel">
            <form action="#" v-on:submit.prevent="add_wheel" class="form-horizontal" enctype="multipart/form-data" method="post">
                <div class="form-group" id="no_table_wheel_content__row">
                    <div id="form_div">
                        <input class="form-control string" id="no_table_wheel" name="Content" type="text" v-model="form_name" placeholder="Name"/>
                        <span class="help-block"></span>
                    </div>

                    <div id="form_div1">
                        <input class="form-control string" id="no_table_wheel" name="desc" type="text" v-model="form_description" placeholder="Description"/>
                        <span class="help-block"></span>
                    </div>


                </div>

                <div class="form-group" id="submit_record__row">
                    <div>
                        <input class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" v-on:click="add_wheel_button()" id="add_wheel_submit" type="submit" value="Post" />
                    </div>
                </div>
            </form>




            <!--
                <form action="#" v-on:submit.prevent="add_wheel" class="form-horizontal" enctype="multipart/form-data" method="post">
                    <div class="mdl-textfield mdl-js-textfield" id="no_table_wheel_content__row">
                        <input class="mdl-textfield__input" id="no_table_wheel" name="Content" type="text" v-model="form_name">
                        <label class="mdl-textfield__label" for="no_table_wheel">wheel description</label>
                    </div>

                    <div>
                        <input class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" v-on:click="add_wheel_button()" id="add_wheel_submit" type="submit" value="Post" />
                    </div>
                </form>
            -->

        </div>
        <!-- add wheel -->


        <!-- view wheels -->
        <div class="result_table">







                <ul class="demo-list-three mdl-list">

                <div v-for="wheel in wheels" class="post-content">
                    <li class="mdl-list__item mdl-list__item--three-line">
                    <span class="mdl-list__item-primary-content">
                        <a v-on:click="goto_wheel_url(wheel.id)">${wheel.name}</a>
                        <span>By: ${wheel.creator_id}</span>
                        <span>Phase: ${wheel.phase}</span>
                        <span>Created On: ${wheel.creation_time}</span>
                        <span>Chosen one: ${wheel.chosen_one}</span>
                        <span class="mdl-list__item-text-body">${wheel.description}</span>
                    </span>
                    <span class="mdl-list__item-secondary-content">
                        <div v-if="wheel.creator_id == current_user" class="mdl-list__item-secondary-action">
                            <i class="mdl-button mdl-js-button" v-on:click="delete_wheel(wheel.id)">Delete</i>
                        </div>
                    </span>
                     </li>
                </div>
                </ul>





            <div v-if="has_more" class="show_more">
                <!-- Colored FAB load more button -->
                <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="load-more" v-on:click="get_more()">
                    <i class="material-icons">add</i>
                </button>
            </div>

        </div>
        <!-- view wheels -->
     </div>

</div>

<script src="{{=URL('static', 'js/default_index.js')}}"></script>

